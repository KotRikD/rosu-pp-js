[package]
name = "rosu-pp-js"
version = "1.0.0"
edition = "2021"
authors = ["MaxOhn <ohn.m@hotmail.de>"]
license = "MIT"
readme = "README.md"
repository = "https://github.com/MaxOhn/rosu-pp-js"
description = "Difficulty and performance calculation for osu!"
keywords = ["osu", "pp", "stars", "performance", "osu!"]

[lib]
crate-type = ["cdylib", "rlib"]

[features]
default = []
# default = ["wee_alloc"] # reduces file size by ~2kb
panic_hook = ["console_error_panic_hook"]

[dependencies]
console_error_panic_hook = { version = "0.1.7", optional = true }
rosu-pp = { path = "../rosu-pp" }
wasm-bindgen = "0.2.84"
wee_alloc = { version = "0.4.5", optional = true }

[dev-dependencies]
wasm-bindgen-test = "0.3.34"

[profile.release]
# opt-level = "z" # reduces file size by ~15% but decreases performance by ~25%
lto = true
panic = "abort"
codegen-units = 1
strip = true

# opt level 3:       339569
# opt level s:       303366
# opt level z:       293216
# opt level 3 + wee: 337884
# opt level s + wee: 298267
# opt level z + wee: 287281